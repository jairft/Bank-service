<div class="login-container">
  <div class="login-card">
    <div class="login-header">
      <div class="bank-logo">
        <h1>Nexo Bank</h1>
      </div>

      <h2>Atualizar Senha</h2>
      <p>Informe sua senha atual e a nova senha desejada</p>
    </div>

    <form #updateForm="ngForm" (ngSubmit)="updatePassword(updateForm)">
      <!-- Senha Atual -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Senha Atual</mat-label>
        <input matInput type="password" [(ngModel)]="currentPassword" name="currentPassword" required />
      </mat-form-field>
      <div *ngIf="errorMessage && !newPassword && !confirmNewPassword" class="error-message">
        <span class="icon">⚠️</span>{{ errorMessage }}
      </div>

      <!-- Nova Senha -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Nova Senha</mat-label>
        <input matInput type="password" [(ngModel)]="newPassword" name="newPassword" required />
      </mat-form-field>

      <!-- Confirmar Nova Senha -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Confirmar Nova Senha</mat-label>
        <input matInput type="password" [(ngModel)]="confirmNewPassword" name="confirmNewPassword" required />
      </mat-form-field>

      <!-- Mensagem de erro geral -->
      <app-error-message [message]="errorMessage" [show]="!!errorMessage"></app-error-message>

      <!-- Mensagem de sucesso -->
      <app-success-message [message]="successMessage" [show]="!!successMessage"></app-success-message>

      <button type="submit" class="login-button" [disabled]="isLoading">
        <mat-progress-spinner
          *ngIf="isLoading"
          diameter="24"
          mode="indeterminate"
          color="accent"
          class="spinner-button"
        ></mat-progress-spinner>
        Atualizar Senha
      </button>
    </form>

    <div class="register-section">
      <a (click)="goToDashboard()" class="register-link">Voltar para o dashboard</a>
    </div>
  </div>
</div>
